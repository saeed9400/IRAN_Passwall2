<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="اسکریپت نصب خودکار PassWall2 با تفکیک ترافیک ایران + راهنمای کامل فعال‌سازی">
<meta name="google-site-verification" content="pqR9dWrVE6R9z2jFYhaciJE1NzOSar5ZJboKnsnvR34" />
<title>IRAN Passwall2 - نصب آسان PassWall2 برای کاربران ایرانی</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root{--primary:#0d6efd;--success:#198754;--warning:#ffc107;--dark:#212529;--light:#f8f9fa;--gray:#6c757d;--border:#dee2e6;}
body{font-family:'Vazirmatn',Tahoma,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#333;margin:0;padding:0;line-height:1.7;}
.container{max-width:1100px;margin:0 auto;padding:20px;}
header{text-align:center;padding:40px 20px;background:rgba(0,0,0,0.4);border-radius:16px;margin-bottom:30px;color:white;position:relative;}
header img{max-width:100%;height:auto;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.5);}
h1{font-size:2.8rem;margin:20px 0 10px;text-shadow:2px 2px 10px rgba(0,0,0,0.6);}
.badge{display:inline-block;padding:8px 16px;background:var(--success);color:white;border-radius:50px;font-size:0.9rem;margin:10px;}
.lang-switch{position:absolute;top:20px;left:20px;display:flex;gap:10px;z-index:10;}
.lang-btn{padding:10px 20px;background:rgba(255,255,255,0.25);color:white;border:2px solid transparent;border-radius:50px;font-weight:bold;cursor:pointer;transition:.3s;}
.lang-btn.active{background:white;color:#333;border-color:var(--primary);}
.card{background:white;border-radius:16px;padding:25px;margin-bottom:25px;box-shadow:0 10px 30px rgba(0,0,0,0.15);transition:transform .3s;}
.card:hover{transform:translateY(-5px);}
.card h2{color:var(--primary);border-bottom:3px solid var(--primary);padding-bottom:10px;margin-top:0;}
.features{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:30px 0;}
.feature-item{background:#f1f3f5;padding:20px;border-radius:12px;text-align:center;border-right:5px solid var(--primary);}
.feature-item i{font-size:2.5rem;color:var(--primary);margin-bottom:15px;}
pre{background:#2d2d2d;color:#f8f8f2;padding:20px;border-radius:12px;overflow-x:auto;direction:ltr;text-align:left;font-size:0.95rem;margin:20px 0;}
.copy-btn{background:var(--success);color:white;border:none;padding:10px 24px;border-radius:50px;cursor:pointer;font-weight:bold;display:inline-block;}
.copy-btn:hover{background:#157347;}
.step{background:#f8f9ff;padding:20px;border-radius:12px;margin:20px 0;border-right:5px solid var(--primary);position:relative;}
.step-number{position:absolute;top:-12px;right:-12px;background:var(--primary);color:white;width:40px;height:40px;line-height:40px;text-align:center;border-radius:50%;font-weight:bold;font-size:1.3rem;}
.note{background:#e3f2fd;border-left:5px solid var(--primary);padding:15px;border-radius:8px;margin:15px 0;font-size:0.95rem;}
.warning{background:#fff3cd;border:1px solid #ffeaa7;color:#856404;padding:15px;border-radius:10px;margin:20px 0;}
table{width:100%;border-collapse:collapse;margin:20px 0;background:#f9f9f9;border-radius:10px;overflow:hidden;}
table td{padding:12px;border-bottom:1px solid #eee;}
table td:first-child{background:#f0f0f0;font-weight:bold;}
footer{text-align:center;padding:40px;color:white;font-size:0.9rem;}
.hidden{display:none;}
[dir="ltr"]{direction:ltr;text-align:left;font-family:'Inter',sans-serif;}
@media(max-width:768px){
    h1{font-size:2.2rem;}
    .lang-switch{position:static;justify-content:center;margin-bottom:20px;}
    .step-number{top:10px;right:10px;width:35px;height:35px;line-height:35px;font-size:1.1rem;}
}
header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center; 
}
</style>
</head>
<body>
<div class="container">

<!-- دکمه زبان -->
<div class="lang-switch">
    <button class="lang-btn active" onclick="switchLang('fa')">فارسی</button>
    <button class="lang-btn" onclick="switchLang('en')">English</button>
</div>



<!-- هدر فارسی -->
<header id="fa-header">
    <img src="https://github.com/user-attachments/assets/c92044ae-3565-410d-9a6c-eabf1e2bd694" alt="IRAN Passwall2 Banner">
    <p>نصب آسان و هوشمند PassWall2 با تفکیک ترافیک ایران</p>
    <div class="badge">کاملاً رایگان • به‌روزرسانی خودکار • مخصوص کاربران ایرانی</div>
</header>

<!-- هدر انگلیسی -->
<header id="en-header" class="hidden" dir="ltr">
    <img src="https://github.com/user-attachments/assets/c92044ae-3565-410d-9a6c-eabf1e2bd694" alt="IRAN Passwall2 Banner">
    <p>Easy & Smart PassWall2 Installation with Iran Traffic Split</p>
    <div class="badge">Completely Free • Auto Update • For Iranian Users</div>
</header>

<!-- محتوای فارسی -->
<div id="fa-content">
    <div class="card">
        <h2><i class="fas fa-info-circle"></i> توضیحات پروژه</h2>
        <p>این اسکریپت قدرتمند، پکیج <strong>PassWall2</strong> را به‌راحتی و فقط از منابع رسمی روی فریمور <strong>OpenWrt</strong> نصب میکند.</p>
        <p>با استفاده از <strong>تفکیک ترافیک هوشمند</strong>، دیگر نیازی نیست برای سایت‌های داخلی ایران پروکسی را خاموش کنید!</p>
        <p>همه چیز به‌صورت خودکار تنظیم می‌شود و همیشه آخرین نسخه PassWall2 نصب خواهد شد.</p>
    </div>

    <div class="card">
        <h2><i class="fas fa-star"></i> ویژگی‌ها</h2>
        <div class="features">
            <div class="feature-item"><i class="fas fa-shield-alt"></i><h3>نصب از منابع رسمی</h3><p>فقط از ریپازیتوری‌های معتبر و رسمی</p></div>
            <div class="feature-item"><i class="fas fa-route"></i><h3>تفکیک ترافیک ایران</h3><p>سایت‌های داخلی بدون پروکسی، سایت‌های خارجی با پروکسی</p></div>
            <div class="feature-item"><i class="fas fa-database"></i><h3>دیتابیس کامل GeoIP / Geosite</h3><p>مخصوص ایران با دقت بالا</p></div>
            <div class="feature-item"><i class="fas fa-clock"></i><h3>منطقه زمانی تهران</h3><p>تنظیم خودکار زمان و DNS عمومی</p></div>
            <div class="feature-item"><i class="fas fa-cogs"></i><h3>قوانین هوشمند</h3><p>ساخت خودکار Shunt و Routing حرفه‌ای</p></div>
            <div class="feature-item"><i class="fas fa-flag"></i><h3>بنر اختصاصی ایرانی</h3><p>طراحی شده مخصوص کاربران ایرانی</p></div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fas fa-cogs"></i> پیش‌نیازها</h2>
        <ul>
            <li>روتر با فریمور <strong>OpenWrt</strong> (نسخه 21.02 یا بالاتر توصیه می‌شود)</li>
            <li>اتصال فعال به اینترنت</li>
            <li>دسترسی SSH با کاربر <code>root</code></li>
        </ul>
    </div>

    <div class="card">
        <h2><i class="fas fa-bolt"></i> نصب سریع (توصیه شده)</h2>
        <p>فقط کافیست این یک خط را در ترمینال SSH روتر اجرا کنید:</p>
        <pre><code id="cmd-fa">rm -f Passwall-IR.sh && wget https://raw.githubusercontent.com/saeed9400/IRAN_Passwall2/main/Passwall-IR.sh && chmod +x Passwall-IR.sh && sh Passwall-IR.sh</code></pre>
        <p style="text-align:center;"><button class="copy-btn" onclick="copyCode('cmd-fa')">کپی دستور</button></p>
    </div>

    <div class="card">
        <h2>راهنمای کامل فعال‌سازی PassWall2 بعد از نصب</h2>
        <div class="step"><div class="step-number">1</div>
            <strong>اضافه کردن نود و ساب اسکرایب لیست</strong>
            <ul>
                <li><strong>Node List</strong>: برای اضافه کردن نوود لینک تکی</li>
                <li><strong>Node Subscribe</strong>: برای اضافه کردن لینک دریافت تمام نوودها از طریق ساب اسکرایب لیست</li>
            </ul>
        </div>
        <div class="step"><div class="step-number">2</div>
            <strong>فعال کردن نود و انتقال هوشمند نود از ساب اسکرایب لیست</strong>
            <ul>
                <li><strong>Main switch</strong> → Active</li>
                <li><strong>International-Direct</strong> → Direct Connection</li>
                <li><strong>IRAN Geo</strong> → Direct Connection</li>
                <li><strong>Default</strong> → Socks Config [1081Port]</li>
            </ul>
            <p><strong>Socks Main switch</strong> → Active</p>
        </div>
        <div class="step"><div class="step-number">3</div>
            <strong>تنظیمات Socks Config</strong>
            <p>Socks Config → Add و تنظیمات زیر را اعمال کنید:</p>
            <table>
                <tr><td>Enable</td><td>→ Active</td></tr>
                <tr><td>Node</td><td>→ Select always active node</td></tr>
                <tr><td>Auto Switch</td><td>→ Active</td></tr>
                <tr><td>List of backup nodes</td><td>→ Add All Active Node</td></tr>
                <tr><td>Restore Switch</td><td>→ Active</td></tr>
            </table>
            <div class="note">با این تنظیمات در صورت قطع نود اصلی، سریع‌ترین نود جایگزین می‌شود و وقتی نود اصلی برگشت دوباره به آن سوئیچ می‌کند.</div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fas fa-tools"></i> نصب دستی (گام به گام)</h2>
        <ol>
            <li>وارد ترمینال SSH شوید:<pre><code>ssh root@192.168.1.1</code></pre></li>
            <li>دانلود اسکریپت:<pre><code>wget https://raw.githubusercontent.com/saeed9400/IRAN_Passwall2/main/Passwall-IR.sh -O Passwall-IR.sh</code></pre></li>
            <li>اجرا:<pre><code>chmod +x Passwall-IR.sh && ./Passwall-IR.sh</code></pre></li>
        </ol>
    </div>

    <div class="card warning">
        <h3><i class="fas fa-exclamation-triangle"></i> نکات مهم قبل از نصب</h3>
        <ul>
            <li>روتر باید به اینترنت متصل باشد</li>
            <li>توصیه می‌شود قبل از نصب از تنظیمات فعلی بک‌آپ بگیرید</li>
            <li>استفاده شخصی و غیرتجاری کاملاً آزاد است</li>
            <li>در صورت مشکل، می‌توانید در بخش Issues ریپازیتوری گزارش دهید</li>
        </ul>
    </div>
</div>

<!-- محتوای انگلیسی -->
<div id="en-content" class="hidden" dir="ltr">
    <div class="card">
        <h2><i class="fas fa-info-circle"></i> Project Description</h2>
        <p>This powerful script installs the <strong>PassWall2</strong> package easily and only from official sources on <strong>OpenWrt</strong> firmware.</p>
        <p>With <strong>smart traffic splitting</strong>, you no longer need to turn off the proxy for Iranian domestic websites!</p>
        <p>Everything is configured automatically and the latest version of PassWall2 will always be installed.</p>
    </div>

    <div class="card">
        <h2><i class="fas fa-star"></i> Key Features</h2>
        <div class="features">
            <div class="feature-item"><i class="fas fa-shield-alt"></i><h3>Official Sources Only</h3><p>Only from trusted official repositories</p></div>
            <div class="feature-item"><i class="fas fa-route"></i><h3>Iran Traffic Splitting</h3><p>Domestic sites direct, international via proxy</p></div>
            <div class="feature-item"><i class="fas fa-database"></i><h3>Complete GeoIP / Geosite DB</h3><p>Optimized for Iran with high accuracy</p></div>
            <div class="feature-item"><i class="fas fa-clock"></i><h3>Tehran Timezone</h3><p>Auto timezone & public DNS setup</p></div>
            <div class="feature-item"><i class="fas fa-cogs"></i><h3>Smart Rules</h3><p>Auto Shunt & professional routing</p></div>
            <div class="feature-item"><i class="fas fa-flag"></i><h3>Persian Custom Banner</h3><p>Designed specifically for Iranian users</p></div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fas fa-cogs"></i> Requirements</h2>
        <ul>
            <li>Router with <strong>OpenWrt</strong> firmware (21.02 or higher recommended)</li>
            <li>Active internet connection</li>
            <li>SSH access as <code>root</code></li>
        </ul>
    </div>

    <div class="card">
        <h2><i class="fas fa-bolt"></i> Quick Installation (Recommended)</h2>
        <p>Just run this single command in your router's SSH terminal:</p>
        <pre><code id="cmd-en">rm -f Passwall-IR.sh && wget https://raw.githubusercontent.com/saeed9400/IRAN_Passwall2/main/Passwall-IR.sh && chmod +x Passwall-IR.sh && sh Passwall-IR.sh</code></pre>
        <p style="text-align:center;"><button class="copy-btn" onclick="copyCode('cmd-en')">Copy Command</button></p>
    </div>

    <div class="card">
        <h2>Complete PassWall2 Activation Guide After Installation</h2>
        <div class="step"><div class="step-number">1</div>
            <strong>Add Nodes & Subscription</strong>
            <ul>
                <li><strong>Node List</strong>: To add single node links</li>
                <li><strong>Node Subscribe</strong>: To add full subscription link</li>
            </ul>
        </div>
        <div class="step"><div class="step-number">2</div>
            <strong>Enable Node & Smart Switching</strong>
            <ul>
                <li><strong>Main switch</strong> → Active</li>
                <li><strong>International-Direct</strong> → Direct Connection</li>
                <li><strong>IRAN Geo</strong> → Direct Connection</li>
                <li><strong>Default</strong> → Socks Config [1081Port]</li>
            </ul>
            <p><strong>Socks Main switch</strong> → Active</p>
        </div>
        <div class="step"><div class="step-number">3</div>
            <strong>Socks Config Settings</strong>
            <p>Socks Config → Add and set as below:</p>
            <table>
                <tr><td>Enable</td><td>→ Active</td></tr>
                <tr><td>Node</td><td>→ Select always active node</td></tr>
                <tr><td>Auto Switch</td><td>→ Active</td></tr>
                <tr><td>List of backup nodes</td><td>→ Add All Active Node</td></tr>
                <tr><td>Restore Switch</td><td>→ Active</td></tr>
            </table>
            <div class="note">With this setting, if the main node goes down, the fastest backup node will be used automatically. Once the main node returns, it will switch back.</div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fas fa-tools"></i> Manual Installation (Step by Step)</h2>
        <ol>
            <li>Login to SSH:<pre><code>ssh root@192.168.1.1</code></pre></li>
            <li>Download script:<pre><code>wget https://raw.githubusercontent.com/saeed9400/IRAN_Passwall2/main/Passwall-IR.sh -O Passwall-IR.sh</code></pre></li>
            <li>Run:<pre><code>chmod +x Passwall-IR.sh && ./Passwall-IR.sh</code></pre></li>
        </ol>
    </div>

    <div class="card warning">
        <h3><i class="fas fa-exclamation-triangle"></i> Important Notes Before Installation</h3>
        <ul>
            <li>Router must be connected to the internet</li>
            <li>It is recommended to backup current configuration before installation</li>
            <li>Completely free for personal use</li>
            <li>For any issues, submit to repository Issues section</li>
        </ul>
    </div>
</div>

<footer>
    <p>Made with ❤️ for Iranian OpenWrt Users<br>
    <a href="https://github.com/saeed9400/" style="color:white;">github.com/saeed9400/</a></p>
</footer>

<script>
function switchLang(lang) {
    document.getElementById('fa-content').classList.toggle('hidden', lang === 'en');
    document.getElementById('en-content').classList.toggle('hidden', lang === 'fa');
    document.getElementById('fa-header').classList.toggle('hidden', lang === 'en');
    document.getElementById('en-header').classList.toggle('hidden', lang === 'fa');
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.lang-btn').forEach(b => {
        if (b.textContent.trim() === (lang === 'fa' ? 'فارسی' : 'English')) b.classList.add('active');
    });
}

function copyCode(id) {
    const text = document.getElementById(id).textContent;
    navigator.clipboard.writeText(text).then(() => {
        const msg = document.documentElement.lang === 'fa' ? 'کپی شد!' : 'Copied!';
        alert(msg);
    });
}

document.addEventListener('DOMContentLoaded', () => switchLang('fa'));
</script>
</body>
</html>
